1. Raw data decoding

Use `lmdata_toshiba' to decode Toshiba's raw listmode data.
Usage: lmdata_toshiba [cfg_file] [Toshiba_raw_listmode_data_file]
Example:
	lmdata_toshiba recon.cfg Grp0_Frm0_Sub"$i"_pp_tofMask_tof_corr.prl
It will output five files:
	my.aid # angular index of each event
	my.gid # global index of each event
	my.lm # my list-mode data
	my.add_fac # additive factor (need to refer to Toshiba's definition)
	my.mul_fac # multiplicative factor (need to refer to Toshiba's definition)

2. Sensitivity calculation
Use `lmsen_toshiba' to compute a sensitivity image
Usage: lmsen_toshiba [cfg_file] [normalization_factors_and_attenuation_factors]
Example:
	lmsen_toshiba recon.cfg Grp0_Frm0_Sub1_atten_norm.raw
where `Grp0_Frm0_Sub1_atten_norm.raw' is a sinogram data which contains normalization factors and attenuation factors
The output is just a single file with sensitivity for each voxel.

3. Reconstruction
Use `lmrecon' to perform TOF reconstruction
Usage: lmrecon [recon.cfg]
All the parameters are specified in the configuration file. Here's an example of configuration file.

detector_ring_diameter = 909
crystal_size = 4.0775,4.0775,4.0775,12.0
crystal_gap_size = 0.0, 0.0, 0.0
crystal_array_size = 16, 48
number_of_detector_modules = 40,1
TOF_information = 450, 15.625
image_size = 150,150,49
voxel_size = 4.0775,4.0775,4.0775
number_of_radial_bins = 353
sensitivity = /home/raid4/jnzhou/lmrecon_working/app/toshiba_real_data/sensitivity.img
iPSF_model = tker.150.fwhm1.0p.pmat, aker.48.fwhm1.5p.pmat
iterative_algorithm_type = 0
warmup_setting = 10,1
iteration_setting = 10,-1,2
regularizer_strength = 1e7
regularizer_model_type = 0
regularizer_potential_function_type = 0
regularizer_neighborhood_properties = 0, 1
regularizer_buildin_parameter_list = 1e-10
regularizer_spatial_variant_weight = /home/raid4/jnzhou/lmrecon_working/app/toshiba_real_data/01-29-2014/spweight.old # spatial variant weight
input_raw_data_file = my # don't include extension
input_raw_data_format_type = 0 
reconstruction_output_setting = /home/raid4/jnzhou/lmrecon_working/app/toshiba_real_data/01-29-2014, Grp0_Frm0_Sub8.recon

Please check my report on Dec. 17, 2013 for details about each parameter specified in the configuration file.


Also please check the script:
/home/raid4/jnzhou/lmrecon_working/app/toshiba_real_data/run_all_recon
for an detailed example of how to use the software.